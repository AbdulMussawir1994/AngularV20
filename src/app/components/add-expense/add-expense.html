@if (loading()) {
<div class="spinner-overlay">
  <div class="spinner"></div>
</div>
}

<div class="auth-wrapper">
  <ul class="colorlib-bubbles">
    @for (b of bubbles; track $index) {
    <li></li>
    }
  </ul>
  <div class="bubble-wrapper">
    <div class="auth-card">
      <h1>Add Expense</h1>

      <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
        <!-- Title -->
        <div class="form-group">
          <div class="input-wrapper">
            <input class="input" type="text" formControlName="title" placeholder=" " />
            <label>Title</label>
          </div>
          <p class="form-error" [class.hidden]="!isInvalid('title')">
            {{ error('title') }}
          </p>
        </div>

        <!-- Amount -->
        <div class="form-group">
          <div class="input-wrapper">
            <input class="input" type="text" formControlName="amount" placeholder=" " />
            <label>Amount</label>
          </div>
          <p class="form-error" [class.hidden]="!isInvalid('amount')">
            {{ error('amount') }}
          </p>
        </div>

        <!-- Category -->
        <div class="form-group">
          <select class="select" formControlName="category">
            <option value="" disabled>Select Category</option>
            @for (c of categories; track c) {
            <option [value]="c">{{ c }}</option>
            }
          </select>
          <p class="form-error" [class.hidden]="!isInvalid('category')">
            {{ error('category') }}
          </p>
        </div>

        <!-- Type -->
        <div class="form-group">
          <select class="select" formControlName="type">
            <option value="" disabled>Select Type</option>
            @for (t of types; track t) {
            <option [value]="t">{{ t }}</option>
            }
          </select>
          <p class="form-error" [class.hidden]="!isInvalid('type')">
            {{ error('type') }}
          </p>
        </div>

        <!-- Due Date -->
        <div class="form-group">
          <div class="input-wrapper">
            <input class="input" type="date" formControlName="dueDate" />
            <label>Due Date</label>
          </div>
          <p class="form-error" [class.hidden]="!isInvalid('dueDate')">
            {{ error('dueDate') }}
          </p>
        </div>

        <button class="submit-btn" type="submit" [disabled]="form.invalid || submitting()">
          {{ submitting() ? 'Saving...' : 'Save Expense' }}
        </button>
      </form>
    </div>
  </div>
</div>
